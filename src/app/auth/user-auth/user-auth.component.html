<div class="tabgroup-wrapper">
  <mat-tab-group #matTabGoup color="accent" (selectedTabChange)="resetError()" [dynamicHeight]="true" mat-align-tabs="center">
    <mat-tab>
      <ng-template mat-tab-label>
        <span class="tab-label">{{ "AUTH.USER.REGISTER" | translate }}</span>
      </ng-template>

      <ng-template matTabContent>
        <div class="tab-content">
          <div class="form-label">{{ "AUTH.USER.REGISTERATION" | translate }}:</div>
          <auth-form [authFormData]="userFormData"></auth-form>

          <div class="margin-top">
            <button-outlined (click)="register()" [disabled]="userFormData.form.invalid" [loading]="loading$ | async">{{
              "AUTH.USER.REGISTER" | translate
            }}</button-outlined>
          </div>

          <div class="message" *ngIf="authError$ | async as authError">
            <div class="error" *ngIf="authError?.code === 'auth/invalid-email'">
              {{ "AUTH.USER.ERROR_EMAIL_FORMAT" | translate }}
            </div>
            <div class="error" *ngIf="authError?.code === 'auth/email-already-in-use'">
              {{ "AUTH.USER.ERROR_EMAIL_IS_TAKEN" | translate }}
            </div>
          </div>
        </div>
      </ng-template>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <span class="tab-label">{{ "AUTH.USER.LOGIN" | translate }}</span>
      </ng-template>

      <ng-template matTabContent>
        <div class="tab-content">
          <div class="form-label">{{ "AUTH.USER.LOGIN" | translate }}:</div>
          <auth-form [authFormData]="userFormData"></auth-form>

          <div class="margin-top">
            <button-outlined (click)="login()" [disabled]="userFormData.form.invalid" [loading]="loading$ | async">{{
              "AUTH.USER.LOGIN" | translate
            }}</button-outlined>
          </div>

          <div class="message" *ngIf="authError$ | async as authError">
            <div class="error" *ngIf="authError?.code === 'auth/user-not-found'">
              {{ "AUTH.USER.ERROR_USER_NOT_FOUND" | translate }}
            </div>
            <div class="error" *ngIf="authError?.code === 'auth/wrong-password'">
              {{ "AUTH.USER.ERROR_WRONG_PASSWORD" | translate }}
            </div>
          </div>
        </div>
      </ng-template>
    </mat-tab>
  </mat-tab-group>
</div>
